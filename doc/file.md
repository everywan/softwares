# 文件
Linux中, 一切皆以文件的形式存在, 无论是设备, 进程 还是其他.

## 文件类型
Linux 下共有如下七种类型的文件
1. 普通文件: `-`
2. 目录文件: `d`
3. 符号链接: `l`. 注意, 软链接才是符号链接文件, 硬链接是普通文件.
4. 设备文件: 多在 `/dev` 目录下
  - 块设备文件: `b`. 存储数据的接口设备文件. 如硬盘.
  - 字符设备文件: `c`. 串行端口的接口设备文件. 如鼠标键盘.
5. 数据接口文件: `s`. sock 文件, 常用于进程间的网络通信, 或本机进程间的通信
6. 管道文件: `p`. pipe 文件, 主要用于进程间通信. 如使用mkfifo命令可以创建一个FIFO文件, 启用一个进程A从FIFO文件里读数据, 启动进程B往FIFO里写数据, 先进先出, 随写随读.

管道文件是单工的, sock文件是双工的.
- 单工: 数据流是单向的, 如 A 发数据, B 只能接收. 如 广播.
- 半双工: 数据流是双向的, 但是同一时间只能有一个方向. 如 短信
- 全双工: 数据流是双向的, 且同一时间数据可以双向传输. 如 打电话.

参考文章 [Linux文件系统详解-掘金](https://juejin.im/post/5b8ba9e26fb9a019c372e100)

### sock文件
Linux sock文件 分为两种: Internet domain socket 和 Unix domain socket.

双方进程都可以读写 sock 文件, 从而传递数据, 当一端网速不稳定时, 也可以缓冲数据.

socket 与 osi七层模型 紧密关联, 需要先了解 osi七层模型.
在 OSI 七层模型中, 网络层用于区分IP地址, 传输层用于区分端口号. socket 是 TCP/IP协议栈 传输层的一种实现.

Internet domain socket, 即网络上, 不同进程间的socket通信.

Unix domain socket, 用于同一主机上进程的互相通信. 相较于 Internet-domain-socket, Unix-socket 不需要经过网络协议栈, 不需要 打包/拆包/计算校验/维护序号和应答等, 只是将应用层数据从一个进程拷贝到另一个进程.

### pipe文件
Linux 管道分为 命名管道和匿名管道. 管道常用于将一个命令(进程)的输出作为另一个命令(进程)的输入.

可以使用 `mkfifo/mknod` 创建命名管道(即管道文件), 进程 A 直接写入管道文件, 进程 B 从管道文件读取. 当没有读取进程时, 写入进程便会堵塞.
其实与 Go 里的 chanel 类似.

匿名管道, 即 `|`, 直接在两个命令之间使用, 从而避免声明文件, 使程序更简洁.

匿名/命名 跟程序里的 匿名/具名函数也类似, 即是否需要声明函数.

## 目录结构
[目录结构](/doc/dirstructure.md)

## 如何看待 一切皆文件
最高抽象
