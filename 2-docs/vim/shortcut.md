# 使用
## 四种模式
----
`v/V` 进入选择模式.

选择模式下, 可以仅对选择的区域执行命令.

以替换举例, 选择块后按 `:` 进入命令模式会出现 `:'<,'>`, 表示
仅在此区域内操作(默认区域是全局, 当不使用选择模式 选择 时).

````
示例文本
test word linee1,
linee2. this 'line' is right.

:'<,'>s/linee/line/g  # 仅会在选择区域替换
````

----

## 快捷键
> 注: 官方离线文档可以通过在 vim 中输入 `:h` 获取帮助(注意读提示)
> 
> 在线中文文档/替换本地文档 见github地址: [vimdoc-cn](https://github.com/vim-china/vimdoc-cn)

键位图: ![vim-key](./attach/vim-key.png)

| 作用                     | 指令     | 详解                                                   |
| ------------------------ | -------- | ------------------------------------------------------ |
| 移动到词尾               | e        |                                                        |
| 移动到词首               | b        |                                                        |
| 移动到下一个单词         | w        |                                                        |
| 当前位置/行首插入        | i/I      |                                                        |
| 追加/在行尾追加          | a/A      |                                                        |
| 删除后/前边的字符        | x/X      |                                                        |
| 重复命令                 | \.       |                                                        |
| 段首位                   | `{}`     |                                                        |
| 反缩进/缩进              | `<>`     |                                                        |
| 可视化                   | v        | 只有进入可视化后, 才能选定多个字符, 然后进行相应的操作 |
| 行可视化                 | V        |                                                        |
| 翻页                     | ctrl+b/f | b/f: back/front                                        |
| 翻半屏                   | ctrl+u/d |                                                        |
| 回到上次编辑位置         | \`\`     |                                                        |
| 行首/行尾                | ^/$      | 与正则相同, 可以使用`n$`移动到第N行的行尾              |
| 替换模式:替换一个字符    | r        | replace, r与s不同的是r不进入编辑模式                   |
| 替换模式:替换多个字符    | R        | 每一个新输入的都替换掉旧的字符                         |
| 使用多个字符替换一个字符 | s        | 删除多个字符, 进入编辑模式                             |
| 从当前位置替换到行尾     | C        | 删除当前位置到行尾的所有字符, 进入编辑模式             |
| 替换整行                 | S/cc     | 整行被删除, 然后进入输入模式                           |
| 锁定/解锁vim             | ctrl+s/q |                                                        |

衍生/组合使用范例

| 指令         | 作用 | 详解                                        |
| ------------ | ---- | ------------------------------------------- |
| 交换字符     | xp   | x+p, x是删除一个字符并复制到剪切板, p是复制 |
| 交换行       | ddp  | dd+p                                        |
| 调换两个单词 | deep |                                             |

### 剪切板
1. vim 有12个剪切板, 分别是 `0-9,a,",+`, 其中 `y/d/x` 等指令默认将内容复制到 `"` 的剪切板中, 使用 `p` 也是从 `"` 剪切板复制内容.
2. 使用 `:reg` 可以查看所有剪切板的内容
3. 复制到指定剪切板: 在要使用的剪切板前加 `"` 即可. 如复制到`+`剪切板: `"+y`.
4. `+` 剪切板是系统剪切板. 

### 替换

| 指令                | 功能                            |
| ------------------- | ------------------------------- |
| `/foo\c`            | 忽略大小写                      |
| `shift + *`         | 查找当前单词                    |
| `:s/foo/bar/g`      | 当前行替换单词                  |
| `:%s/foo/bar/g`     | 全文替换单词                    |
| `:1,12s/foo/bar/g`  | 指定行区间内替换单词            |
| `:.,+2s/foo/bar/g`  | 当前行与接下来的两行内替换单词  |
| `:'<,'>s/foo/bar/g` | 可视模式选定的区域内替换单词    |
| `i/I`               | 替换标识, i忽略大小写区别,I相反 |
| `c`                 | 替换标识, 替换时需要确认        |

## 粘贴锁进问题
`set paste` 进入粘贴模式, 会自动设置一系列指令, 进行原格式粘贴.

## 参考
1. [在vim中优雅的查找与替换](https://harttle.land/2016/08/08/vim-search-in-file.html)
